<%= grid(@bills, hide_submit_button: true, hide_reset_button: true) do |g|
  g.column name: '发票类型', custom_filter: false do |a|
    a.bill_type
  end

  g.column name: '公司名称', custom_filter: false do |a|
    a.organization
  end

  g.column name: '税号', custom_filter: false do |a|
    a.code
  end

  g.column name: '开户行', custom_filter: false do |a|
    a.bank
  end

  g.column name: '公司地址', custom_filter: false do |a|
    a.address
  end

  g.column name: '发票金额', custom_filter: false do |a|
    a.amount
  end

  g.column in_csv: false do |bill|
    if can?('bills', 'to_billed')  && !bill.billed?
      link_to '已开票', to_billed_main_case_bill_path(bill.main_case, bill), method: :patch, class: 'btn btn-info btn-sm'
    end
  end

  g.column in_csv: false do |bill|
    if can?('bills', 'to_taked_away') && !bill.taked_away?
      link_to '已领走', to_taked_away_main_case_bill_path(bill.main_case, bill), method: :patch, class: 'btn btn-primary btn-sm'
    end
  end

  g.column in_csv: false do |bill|
    if can?('bills', 'destroy') && bill.unBilled?
      link_to '删除', main_case_bill_path(bill.main_case, bill), method: :delete, data: { confirm: '确定删除么?' }, class: 'btn btn-danger btn-sm'
    end
  end

end -%>