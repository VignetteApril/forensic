<%= grid(@main_cases, hide_submit_button: true, hide_reset_button: true, show_filters: :when_filtered) do |g|
  g.column name: '流水号', attribute: 'serial_no', ordering: false do |main_case|
    main_case.serial_no
  end

  g.column name: '案号', attribute: 'case_no_display', ordering: false do |main_case|
    main_case.case_no_display
  end

  g.column name: '委托方', attribute: 'organization_name', ordering: false do |main_case|
    main_case.organization_name
  end

  g.column name: '联系人', attribute: 'user_name', ordering: false do |main_case|
    main_case.user_name
  end

  g.column name: '联系方式', attribute: 'organization_phone', ordering: false do |main_case|
    main_case.organization_phone
  end

  g.column name: '被鉴定人', attribute: 'name', assoc: :appraised_unit, ordering: false do |main_case|
    main_case.appraised_unit.name
  end

  g.column name: '鉴定事项', attribute: 'matter', ordering: false do |main_case|
    JSON.parse(main_case.matter).join(',') unless main_case.matter.blank?
  end

  g.column name: '受委托部门', attribute: 'name', assoc: :department, ordering: false do |main_case|
    main_case.department.name
  end

  g.column name: '受理状态', attribute: 'case_stage', ordering: false do |main_case|
    MainCase::CASE_STAGE_MAP[main_case.case_stage.to_sym]
  end

  g.column name: '付款状态', attribute: 'financial_stage', ordering: false do |main_case|
    main_case.financial_stage
  end

  g.column name: '案件状态', attribute: 'case_stage', ordering: false do |main_case|
    MainCase::CASE_STAGE_MAP[main_case.case_stage.to_sym]
  end

  g.column name: '案件状态', attribute: 'case_stage', ordering: false do |main_case|
    main_case.case_stage
  end

  g.column name: '经办人', attribute: 'pass_user', ordering: false do |main_case|
    main_case.pass_user
  end

  g.column name: '结案倒计时', attribute: 'commission_date', ordering: false do |main_case|
    distance_of_time_in_words(Date.today, main_case.commission_date)
  end

  g.column in_csv: false, html: {style: "width:15px;"}  do |main_case|
    link_to '查看', main_case, class: 'btn btn-secondary btn-sm'
  end

  g.column in_csv: false, html: {style: "width:15px;"}  do |main_case|
    link_to '编辑', edit_main_case_path(main_case), class: 'btn btn-secondary btn-sm'
  end

  g.column in_csv: false, html: {style: "width:15px;"}  do |main_case|
    link_to '删除', main_case, method: :delete, data: { confirm: '确定删除么?' }, class: 'btn btn-danger btn-sm'
  end
end -%>